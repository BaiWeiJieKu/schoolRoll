webpackJsonp([4],{"5sQR":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=[{title:"用户名",key:"no",align:"center"},{title:"名称",key:"name",align:"center"},{title:"密码",key:"password",align:"center"},{title:"创建时间",key:"createTime",align:"center"},{title:"类型",key:"type",align:"center",render:function(e,t){var n="";return 1==t.row.type?n="省":2==t.row.type?n="市":3==t.row.type&&(n="学校"),e("span",n)}}],i={name:"UserTale",data:function(){return{tempId:0,deleteState:!1,modalState:!1,titles:[],content:[],searchData:{number:1,size:10,name:""},deleteModelState:!1}},components:{CommonsTable:function(e){return n.e(11).then(function(){var t=[n("9zQt")];e.apply(null,t)}.bind(this)).catch(n.oe)},UserForm:function(e){return n.e(15).then(function(){var t=[n("8I4P")];e.apply(null,t)}.bind(this)).catch(n.oe)},UserSearch:function(e){return n.e(17).then(function(){var t=[n("SP2U")];e.apply(null,t)}.bind(this)).catch(n.oe)},DeleteModal:function(e){return n.e(12).then(function(){var t=[n("eMkR")];e.apply(null,t)}.bind(this)).catch(n.oe)}},methods:{handlerSearch:function(){axios.get("/users",{params:this.searchData}).then(this.initPageSucc)},insertHandler:function(e){this.modalState=!1,axios.post("/user",e).then(this.handlerInsertSucc)},handlerInsertSucc:function(e){this.$Notice.success({desc:e.message}),this.initPage(this.searchData.number,this.searchData.size)},handlerInsert:function(){this.modalState=!0},deleteHandler:function(e){axios.delete("/user",{data:{id:e}}).then(this.handlerDeleteSucc)},handlerOnOk:function(){this.deleteState=!1,this.deleteHandler(this.tempId)},handlerOnCancel:function(){this.deleteState=!1},handlerDeleteSucc:function(e){this.$Notice.success({desc:e.message}),this.initPage(this.searchData.number,this.searchData.size)},initPage:function(e,t){this.searchData.number=e,this.searchData.size=t,this.handlerSearch()},initPageSucc:function(e){e&&(this.content=e.obj.content)},pageChangeHandler:function(e){this.initPage(e.number,e.size)},pageSizeChangeHandler:function(e){this.initPage(e.number,e.size)},tableInit:function(){var e=this,t=!0;a.forEach(function(e){"id"==e.key&&(t=!1)}),t&&a.push({title:"操作",key:"id",align:"center",render:function(t,n){return t("div",[t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.tempId=n.row.id,e.deleteState=!0}}},"删除")])}}),this.titles=a},handlerModalCancle:function(){this.modalState=!1}},watch:{deleteState:function(e){this.deleteModelState=e}},mounted:function(){this.initPage(1,10)},created:function(){this.tableInit()}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("UserSearch",{on:{handlerInsert:e.handlerInsert}}),e._v(" "),n("CommonsTable",{attrs:{titles:e.titles,content:e.content},on:{delete:e.deleteHandler,pageChangeHandler:e.pageChangeHandler,pageSizeChangeHandler:e.pageSizeChangeHandler}}),e._v(" "),n("UserForm",{attrs:{modalState:e.modalState},on:{handlerModalCancle:e.handlerModalCancle,insertHandler:e.insertHandler}}),e._v(" "),n("DeleteModal",{attrs:{deleteState:e.deleteState},on:{handlerOnOk:e.handlerOnOk,handlerOnCancel:e.handlerOnCancel}})],1)},staticRenderFns:[]};var l=n("VU/8")(i,r,!1,function(e){n("fWqk")},null,null);t.default=l.exports},fWqk:function(e,t){}});