webpackJsonp([14],{"Ej+7":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("BO1k"),n=r.n(a),i={name:"StudentForm",data:function(){var e=this;return{ruleValidate:{name:[{required:!0,message:"姓名不允许为空",trigger:"blur"}],card:[{required:!0,message:"类型不允许为空",trigger:"change"}],user:[{required:!0,validator:function(t,r,a){3-e.user.type!=e.temp.user.length?a(new Error("请选择学校")):a()}}],speciality:[{required:!0,validator:function(t,r,a){""==e.temp.speciality?a(new Error("请选择专业")):a()}}]},parentIdShow:!1,temp:{name:"",gender:"男",card:"",user:[],speciality:""},types:[],parentDatas:[],user:{},users:[]}},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var r=t.temp.user.length;t.temp.user=t.temp.user[r-1],t.$emit("insertHandler",t.temp)}})},handleReset:function(e){this.$refs[e].resetFields(),this.temp.gender="男",this.specialities=[],this.$emit("handlerModalCancle")},handlerOnVisibleChange:function(e){e||this.$emit("handlerModalCancle")},isCheck:function(){axios.get("/isCheck").then(this.isCheckSucc)},isCheckSucc:function(e){e&&(this.user=e.obj),3==this.user.type||axios.get("/susers").then(this.handlerGetUserSucc)},handlerGetUserSucc:function(e){if(e){this.users=e.obj;new Array;var t=!0,r=!1,a=void 0;try{for(var i,l=n()(this.users);!(t=(i=l.next()).done);t=!0){var s=i.value;if(s.value=s.id,s.label=s.name,s,s.children){var o=!0,c=!1,u=void 0;try{for(var d,p=n()(s.children);!(o=(d=p.next()).done);o=!0){var h=d.value;if(h.value=h.id,h.label=h.name,h.children){var m=!0,v=!1,f=void 0;try{for(var y,b=n()(h.children);!(m=(y=b.next()).done);m=!0){var g=y.value;g.value=g.id,g.label=g.name}}catch(e){v=!0,f=e}finally{try{!m&&b.return&&b.return()}finally{if(v)throw f}}}}}catch(e){c=!0,u=e}finally{try{!o&&p.return&&p.return()}finally{if(c)throw u}}}}}catch(e){r=!0,a=e}finally{try{!t&&l.return&&l.return()}finally{if(r)throw a}}}},cascaderChange:function(e){this.temp.speciality="";var t=void 0,r=!0,a=!1,i=void 0;try{for(var l,s=n()(this.users);!(r=(l=s.next()).done);r=!0){var o=l.value;e[0]==o.id&&(1==this.user.type||0==this.user.type?t=o.children:2==this.user.type&&(t=o))}}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}if(t&&2!=this.user.type)for(var c=1;c<e.length;c++){var u=!0,d=!1,p=void 0;try{for(var h,m=n()(t);!(u=(h=m.next()).done);u=!0){o=h.value;e[c]==o.id&&(t=c==e.length-1?o:o.children)}}catch(e){d=!0,p=e}finally{try{!u&&m.return&&m.return()}finally{if(d)throw p}}}this.specialities=t.speciality}},props:{modalState:Boolean,specialities:Array},created:function(){this.isCheck()}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Modal",{staticStyle:{"padding-top":"10px"},attrs:{"footer-hide":!0,"mask-closable":!1},on:{"on-visible-change":e.handlerOnVisibleChange},model:{value:e.modalState,callback:function(t){e.modalState=t},expression:"modalState"}},[r("Form",{ref:"temp",attrs:{model:e.temp,rules:e.ruleValidate,"label-width":80}},[r("FormItem",{attrs:{label:"姓名",prop:"name"}},[r("Input",{attrs:{placeholder:"姓名"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),r("FormItem",{attrs:{label:"性别"}},[r("Select",{attrs:{placeholder:"性别"},model:{value:e.temp.gender,callback:function(t){e.$set(e.temp,"gender",t)},expression:"temp.gender"}},[r("Option",{attrs:{value:"男"}},[e._v("男")]),e._v(" "),r("Option",{attrs:{value:"女"}},[e._v("女")])],1)],1),e._v(" "),r("FormItem",{attrs:{label:"身份证号",prop:"card"}},[r("Input",{attrs:{placeholder:"身份证号"},model:{value:e.temp.card,callback:function(t){e.$set(e.temp,"card",t)},expression:"temp.card"}})],1),e._v(" "),r("FormItem",{directives:[{name:"show",rawName:"v-show",value:3!=e.user.type,expression:"user.type!=3"}],attrs:{label:"所属学校",prop:"user"}},[r("Cascader",{attrs:{data:e.users},on:{"on-change":e.cascaderChange},model:{value:e.temp.user,callback:function(t){e.$set(e.temp,"user",t)},expression:"temp.user"}})],1),e._v(" "),r("FormItem",{attrs:{label:"专业",prop:"speciality"}},[r("Select",{attrs:{placeholder:"专业"},model:{value:e.temp.speciality,callback:function(t){e.$set(e.temp,"speciality",t)},expression:"temp.speciality"}},e._l(e.specialities,function(t){return r("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),r("FormItem",[r("div",{staticClass:"form-item-content"},[r("Button",{staticClass:"ivu-btn-ghost",attrs:{type:"info",ghost:""},on:{click:function(t){e.handleSubmit("temp")}}},[e._v("提交")]),e._v(" "),r("Button",{on:{click:function(t){e.handleReset("temp")}}},[e._v("取消")])],1)])],1)],1)},staticRenderFns:[]};var s=r("VU/8")(i,l,!1,function(e){r("lDGl")},null,null);t.default=s.exports},lDGl:function(e,t){}});