webpackJsonp([8],{GGCa:function(e,t){},NR8I:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("BO1k"),i=n.n(a),r=[{title:"学生姓名",key:"name",align:"center"},{title:"身份证号",key:"card",align:"center"},{title:"性别",key:"gender",align:"center"},{title:"入学时间",key:"entranceTime",align:"center"},{title:"专业",key:"speciality",align:"center"},{title:"状态",key:"pass",align:"center",render:function(e,t){var n="yellow",a="审核中",i="";switch(t.row.pass){case 0:n="yellow",a="审核中";break;case 1:n="green",a="市级通过";break;case-1:n="red",a="市级不通过";break;case 2:n="green",a="省级通过";break;case-2:n="red",a="省级不通过"}switch(t.row.operator){case 0:i="学籍注册";break;case 1:i="转专业";break;case 2:i="退学";break;case 3:i="毕业";break;case 4:i="休学";break;case 5:i="复学"}return e("tag",{props:{type:"border",checked:!0,checkable:!0,color:n}},i+a)}},{title:"所属院校",key:"user",align:"center",render:function(e,t){return e("span",t.row.user.name)}},{title:"操作",key:"id",align:"center"}],s={name:"UserTale",data:function(){return{tempId:0,specialityState:!1,modalState:!1,specily:[],changeSpeciality:{id:0,sid:0},titles:[],content:[],specialities:[],searchData:{number:1,size:10,name:""}}},components:{CommonsTable:function(e){return n.e(11).then(function(){var t=[n("9zQt")];e.apply(null,t)}.bind(this)).catch(n.oe)},UserForm:function(e){return n.e(14).then(function(){var t=[n("Ej+7")];e.apply(null,t)}.bind(this)).catch(n.oe)},UserSearch:function(e){return n.e(13).then(function(){var t=[n("wtEr")];e.apply(null,t)}.bind(this)).catch(n.oe)},DeleteModal:function(e){return n.e(12).then(function(){var t=[n("eMkR")];e.apply(null,t)}.bind(this)).catch(n.oe)}},methods:{handlerSpecialityChangeOk:function(){var e=this,t=void 0;this.content.forEach(function(n,a){e.changeSpeciality.id==n.id&&(t=n)}),t.sid!=this.changeSpeciality.sid&&axios.get("/studentSpeciality",{params:{id:this.changeSpeciality.id,speciality:this.changeSpeciality.sid}}).then(this.handlerSearch)},modalStateChange:function(e){this.specialityState=e},handlerSearch:function(){axios.get("/students",{params:this.searchData}).then(this.initPageSucc)},insertHandler:function(e){this.modalState=!1,axios.post("/student",e).then(this.handlerInsertSucc)},handlerInsertSucc:function(e){this.$Notice.success({desc:e.message}),this.initPage(this.searchData.number,this.searchData.size)},handlerInsert:function(){this.modalState=!0},deleteHandler:function(e){axios.delete("/user",{data:{id:e}}).then(this.handlerDeleteSucc)},handlerDeleteSucc:function(e){this.$Notice.success({desc:e.message}),this.initPage(this.searchData.number,this.searchData.size)},initPage:function(e,t){this.searchData.number=e,this.searchData.size=t,this.handlerSearch()},initPageSucc:function(e){if(e){this.$data.content=e.obj.content;var t=!0,n=!1,a=void 0;try{for(var r,s=i()(this.content);!(t=(r=s.next()).done);t=!0){var c=r.value,l=c.speciality;c.speciality=l.name,c.sid=l.id}}catch(e){n=!0,a=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw a}}}},pageChangeHandler:function(e){this.initPage(e.number,e.size)},pageSizeChangeHandler:function(e){this.initPage(e.number,e.size)},handlerGetSpeciality:function(){var e=this;axios.get("/uSpecialitys",{params:{id:1}}).then(function(t){200==t.code&&(e.specialities=t.obj)})},handlerGetSpecialitySucc:function(e){e.obj&&(this.specialities=e.obj)},tableInit:function(){var e=this;r.forEach(function(t){"id"==t.key&&(t.render=function(t,n){if(1==n.row.operatorState&&1!=n.row.isState){var a=new Array;return 1==n.row.operatorState&&4!=n.row.operator&&(a.push(t("Button",{props:{type:"info",size:"small"},on:{click:function(){console.log(n.row),e.changeSpeciality.sid=n.row.sid,e.specily=n.row.user.speciality,e.changeSpeciality.id=n.row.id,e.specialityState=!0}}},"转专业")),a.push(t("Button",{style:{marginLeft:"5px"},props:{type:"info",size:"small"},on:{click:function(){axios.get("/quitStudent",{params:{id:n.row.id}}).then(e.handlerQAndCSucc)}}},"退学")),a.push(t("Button",{style:{marginLeft:"5px"},props:{type:"info",size:"small"},on:{click:function(){axios.get("/hughStudent",{params:{id:n.row.id}}).then(e.handlerQAndCSucc)}}},"休学")),a.push(t("Button",{style:{marginLeft:"5px"},props:{type:"info",size:"small"},on:{click:function(){axios.get("/state",{params:{id:n.row.id}}).then(e.handlerSearch)}}},"毕业"))),1==n.row.operatorState&&4==n.row.operator&&a.push(t("Button",{style:{marginLeft:"5px"},props:{type:"info",size:"small"},on:{click:function(){axios.get("/hughStudent",{params:{id:n.row.id}}).then(e.handlerQAndCSucc)}}},"复学")),t("div",a)}})}),this.titles=r},handlerQAndCSucc:function(){this.handlerSearch()},handlerModalCancle:function(){this.modalState=!1}},mounted:function(){this.initPage(1,10),this.handlerGetSpeciality()},created:function(){this.tableInit()}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("UserSearch",{on:{handlerInsert:e.handlerInsert}}),e._v(" "),n("CommonsTable",{attrs:{titles:e.titles,content:e.content},on:{pageChangeHandler:e.pageChangeHandler,pageSizeChangeHandler:e.pageSizeChangeHandler}}),e._v(" "),n("UserForm",{attrs:{specialities:e.specialities,modalState:e.modalState},on:{handlerModalCancle:e.handlerModalCancle,insertHandler:e.insertHandler}}),e._v(" "),n("Modal",{attrs:{title:"Modal 1","hiden-footer":!0},on:{"on-visible-change":e.modalStateChange,"on-ok":e.handlerSpecialityChangeOk},model:{value:e.specialityState,callback:function(t){e.specialityState=t},expression:"specialityState"}},[n("Select",{staticStyle:{width:"200px"},model:{value:e.changeSpeciality.sid,callback:function(t){e.$set(e.changeSpeciality,"sid",t)},expression:"changeSpeciality.sid"}},e._l(e.specily,function(t){return n("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name)+" "+e._s(t.numbering))])}))],1)],1)},staticRenderFns:[]};var l=n("VU/8")(s,c,!1,function(e){n("GGCa")},null,null);t.default=l.exports}});